// Common variables
$primary: #ff6b35;
$secondary: #4fc3f7;
$bg-dark: #2d2d2d;
$bg-darker: #1a1a1a;
$border: #404040;
$text-light: #fff;
$text-muted: #888;
$text-dim: #666;

// Mixins
@mixin flex-center { display: flex; align-items: center; }
@mixin flex-between { display: flex; align-items: center; justify-content: space-between; }
@mixin card { background: $bg-dark; border: 1px solid $border; border-radius: 8px; }
@mixin button-base { 
  border: none; cursor: pointer; transition: all 0.2s ease; border-radius: 4px;
  &:hover { transform: translateY(-1px); }
}
@mixin link-style($bg, $hover-bg) {
  background: $bg; color: white; text-decoration: none; padding: 0.25rem 0.5rem;
  border-radius: 4px; font-size: 0.8rem; font-weight: 500; transition: all 0.2s ease;
  &:hover { background: $hover-bg; transform: translateY(-1px); }
}

.type-view {
  .loading, .error {
    text-align: center; padding: 3rem;
    p { color: $text-muted; font-size: 1.1rem; margin: 0 0 1rem 0; }
  }

  .loading .spinner {
    width: 40px; height: 40px; border: 4px solid $border; border-top: 4px solid $primary;
    border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem auto;
  }

  .error {
    background: rgba(255, 0, 0, 0.1); border: 1px solid rgba(255, 0, 0, 0.3); border-radius: 8px;
    h2 { color: #ff6b6b; margin-bottom: 1rem; }
    p { color: #ff6b6b; }
    .back-btn { @include button-base; background: $primary; color: white; padding: 0.75rem 1.5rem; font-weight: 500; }
  }

  .type-header {
    margin-bottom: 2rem;
    .breadcrumb {
      @include flex-center; gap: 0.5rem; margin-bottom: 1.5rem; font-size: 0.875rem; color: $text-muted;
      a { color: $primary; text-decoration: none; &:hover { text-decoration: underline; } }
      .separator { color: $text-dim; }
      .current { color: $text-light; font-weight: 500; }
    }

    .type-info {
      @include flex-center; gap: 1.5rem; padding: 2rem; @include card; border-radius: 12px;
      .type-icon { font-size: 3rem; width: 60px; text-align: center; }
      .type-details {
        flex: 1;
        h1 { margin: 0 0 0.5rem 0; font-size: 2rem; color: $primary; }
        .type-meta {
          @include flex-center; gap: 1.5rem; font-size: 0.875rem;
          .type-kind { background: rgba($primary, 0.2); color: $primary; padding: 0.25rem 0.75rem; border-radius: 20px; text-transform: capitalize; font-weight: 500; }
          .file-info, .member-count { color: $text-muted; }
          .file-info { font-family: 'Courier New', monospace; }
        }
      }
    }
  }

  // Common tag styles
  .modifier-tag, .base-type-tag, .generic-param-tag {
    padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.75rem; font-weight: 500; color: white;
    &.small { font-size: 0.7rem; padding: 0.1rem 0.3rem; }
  }
  .modifier-tag { background: $secondary; }
  .base-type-tag, .generic-param-tag { background: #ff9800; }
  .generic-param-tag { background: #9c27b0; }

  // Link styles
  .base-type-link, .derived-type-link {
    @include link-style(#ff9800, #f57c00); display: inline-block;
    &:visited { color: white; }
  }
  .derived-type-link { margin-bottom: 0.25rem; }

  // Type modifiers and inheritance sections
  .type-modifiers, .base-types, .generic-params, .derived-types {
    margin-top: 0.75rem; @include flex-center; gap: 0.5rem; flex-wrap: wrap;
    .label { font-weight: 600; color: #ccc; font-size: 0.875rem; }
  }

  .derived-types {
    flex-direction: column; align-items: flex-start;
    .derived-types-header {
      @include flex-between; cursor: pointer; padding: 0.25rem 0; transition: all 0.2s ease; width: 100%;
      &:hover { background: rgba(255, 255, 255, 0.05); border-radius: 4px; padding: 0 0.5rem; }
      .toggle-icon { color: $secondary; font-size: 0.75rem; margin-left: 0.5rem; }
    }
    .derived-types-list {
      margin-top: 0.5rem; padding-left: 1.75rem; display: flex; flex-direction: column; gap: 0.25rem;
      border-left: 2px solid rgba($secondary, 0.3); width: 100%;
    }
  }

  .type-content {
    .members-section {
      .members-header {
        margin-bottom: 1.5rem;
        h2 { margin: 0 0 1rem 0; color: $text-light; font-size: 1.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid $border; }
        .member-filters {
          @include flex-center; gap: 1rem; flex-wrap: wrap;
          .filter-label { color: $text-muted; font-size: 0.875rem; font-weight: 500; }
          .filter-buttons { display: flex; gap: 0.5rem; flex-wrap: wrap; }
          .filter-btn {
            @include flex-center; gap: 0.5rem; background: $bg-dark; border: 1px solid $border; color: $text-muted;
            padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-size: 0.875rem;
            .filter-icon { font-size: 1rem; }
            .filter-count { color: $text-dim; font-size: 0.8rem; }
            &:hover { border-color: $primary; color: #ccc; }
            &.active { background: $primary; border-color: $primary; color: white; .filter-count { color: rgba(255, 255, 255, 0.8); } }
          }
        }
      }

      .members-list {
        display: grid; gap: 1rem;
        .member-item {
          @include card; padding: 1.5rem; transition: all 0.2s ease;
          &:hover { border-color: $primary; box-shadow: 0 4px 20px rgba($primary, 0.1); }
          
          .member-header {
            @include flex-center; gap: 1rem; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid $border;
            .member-icon { font-size: 1.25rem; }
            .member-kind { background: rgba($primary, 0.2); color: $primary; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; text-transform: uppercase; font-weight: 500; }
            .member-name { color: $text-light; font-weight: 600; font-size: 1rem; }
            .member-line { color: $text-muted; font-size: 0.875rem; font-family: 'Courier New', monospace; margin-left: auto; }
            .copy-link-btn {
              @include button-base; background: transparent; border: 1px solid $text-dim; color: $text-muted; padding: 0.25rem 0.5rem; font-size: 0.8rem; margin-left: 0.5rem;
              &:hover { background: $primary; border-color: $primary; color: white; }
            }
          }

          .member-modifiers { margin-bottom: 0.5rem; display: flex; gap: 0.25rem; flex-wrap: wrap; }
          .member-signature {
            font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.5; color: #e0e0e0;
            background: $bg-darker; padding: 1rem; border-radius: 6px; border: 1px solid $border; overflow-x: auto;
            .keyword { color: $primary; font-weight: 500; }
            .return-type { color: $secondary; font-weight: 500; }
            .method-name { color: #81c784; font-weight: 600; }
            .param-name { color: #ffb74d; }
            .param-type { color: #ba68c8; font-weight: 500; }
            .type-link {
              color: $secondary; background: rgba($secondary, 0.15); text-decoration: none; font-weight: 700;
              padding: 1px 4px; border-radius: 3px; border: 1px solid rgba($secondary, 0.3); transition: all 0.2s ease;
              cursor: pointer; user-select: none;
              &:hover { color: $bg-darker; background: $secondary; border-color: $secondary; transform: translateY(-1px); box-shadow: 0 2px 8px rgba($secondary, 0.4); }
              &:visited { color: #81c784; background: rgba(129, 199, 132, 0.15); border-color: rgba(129, 199, 132, 0.3);
                &:hover { color: $bg-darker; background: #81c784; border-color: #81c784; }
              }
            }
          }

          .member-details {
            margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid $border;
            .return-type-section, .referenced-types-section { margin-bottom: 0.75rem; &:last-child { margin-bottom: 0; } }
            .return-type {
              color: $text-muted; font-size: 0.875rem;
              code { background: $bg-darker; color: $secondary; padding: 0.2rem 0.4rem; border-radius: 3px; font-family: monospace; font-size: 0.8rem; }
              .return-type-link {
                background: $bg-darker; color: $secondary; padding: 0.2rem 0.4rem; border-radius: 3px; font-family: monospace; font-size: 0.8rem;
                text-decoration: none; transition: all 0.2s ease; border: 1px solid transparent;
                &:hover { background: $secondary; color: $bg-darker; border-color: $secondary; }
                &:visited { color: #81c784; }
              }
            }
            .referenced-types-section {
              .referenced-types-label { color: $text-muted; font-size: 0.875rem; display: block; margin-bottom: 0.5rem; }
              .referenced-types-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
              .referenced-type-link {
                @include link-style($primary, #e55a2b); border: 1px solid $primary;
                &:visited { background: #81c784; border-color: #81c784; &:hover { background: #66bb6a; border-color: #66bb6a; } }
              }
            }
          }

          // Override section
          .override-section {
            margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid $border;
            .overrides-info { margin-bottom: 0.5rem; }
            .override-label { font-weight: 500; color: $secondary; margin-right: 0.5rem; font-size: 0.875rem; }
            .override-link { @include link-style(#ff9800, #e68900); border: 1px solid #ff9800; margin-right: 0.5rem; margin-bottom: 0.25rem; display: inline-block; }
            .overridden-by-info {
              .overridden-by-header {
                @include flex-between; cursor: pointer; padding: 0.25rem 0; transition: all 0.2s ease;
                &:hover { background: rgba(255, 255, 255, 0.05); border-radius: 4px; padding: 0 0.5rem; }
                .toggle-icon { color: $secondary; font-size: 0.75rem; }
              }
              .overridden-by-list {
                margin-top: 0.5rem; padding-left: 1.75rem; display: flex; flex-direction: column; gap: 0.25rem;
                border-left: 2px solid rgba($secondary, 0.3);
              }
            }
          }
        }
      }
    }

    .no-members, .no-filtered-members {
      text-align: center; padding: 3rem; @include card;
      .clear-filters-btn { @include button-base; background: $primary; color: white; padding: 0.75rem 1.5rem; font-size: 0.875rem; font-weight: 500; }
    }
    .no-members p { margin: 0; }
  }
}

@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

// Responsive design
@media (max-width: 768px) {
  .type-view {
    .type-header .type-info {
      flex-direction: column; text-align: center; gap: 1rem;
      .type-details .type-meta { flex-direction: column; gap: 0.5rem; align-items: center; }
    }
    .type-content .members-section .members-list .member-item {
      .member-header { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
      .member-signature { font-size: 0.8rem; padding: 0.75rem; }
    }
  }
}
